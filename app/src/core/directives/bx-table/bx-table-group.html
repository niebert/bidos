<div layout="column" layout-fill>
  <md-toolbar>
    <span class="md-toolbar-tools">
      <md-button aria-label="home" ui-sref="bx.home">
        <md-icon md-svg-src="/img/ic_arrow_back_48px.svg" class="s48" alt="Home"></md-icon>
      </md-button>

      <h2 flex>Kinder und Gruppen verwalten</h2>

      <!-- Admin only -->

      <md-button aria-label="dialog" ng-click="vm.dialog($event, {type:'institution'})" ng-if="vm.me.role == 0">
        NEUE INSTITUTION
      </md-button>

      <md-button aria-label="dialog" ng-click="vm.dialog($event, {type:'group'})" ng-if="vm.me.role == 0">
        NEUE GRUPPE
      </md-button>

      <!-- Only practitioner -->

      <md-button aria-label="dialog" ng-click="vm.dialog($event, {type:'kid'})">
        NEUES KIND
      </md-button>

      <md-button aria-label="dialog" ng-click="vm.userDialog($event, vm.me)">
        {{ vm.me.name }} / {{ vm.me.roleName }}
      </md-button>

    </span>
  </md-toolbar>

  <md-content flex class="bx-content">

    <!-- Search & Filter -->

    <section layout class="search-bar">
      <md-input-container flex ng-if="vm.me.role != 2">
        <label>Suchen</label>
        <input type="text" ng-model="stuff.name">
      </md-input-container>
      <!-- <md-input-container flex>
        <label>Institution filtern</label>
        <input type="text" ng-model="stuff.institution">
      </md-input-container> -->
      <md-input-container flex ng-if="vm.me.role != 1">
        <label>ID filtern</label>
        <input type="text" ng-model="stuff.id">
      </md-input-container>
      <md-select placeholder="Gruppe" ng-model="stuff.group_id" ng-if="vm.me.role !== 1">
        <md-option value="">Alle</md-option>
        <md-option value="{{ group.id }}" ng-repeat="group in vm.groups">{{ group.name }}</md-option>
      </md-select>
      <md-select placeholder="Institution" ng-model="stuff.institution_id" ng-if="vm.me.role !== 1">
        <md-option value="">Alle</md-option>
        <md-option value="{{ institution.id }}" ng-repeat="institution in vm.institutions">{{ institution.name }}</md-option>
      </md-select>
      <!-- <md-select placeholder="Geschlecht" ng-model="stuff.sex">
        <md-option value="">Alle</md-option>
        <md-option value="1">MÃ¤dchen</md-option>
        <md-option value="0">Junge</md-option>
      </md-select> -->
      <!-- <md-select placeholder="Sortieren" ng-model="sort">
        <md-option value="name" ng-repeat="sex in vm.sexes">Name</md-option>
        <md-option value="observations" ng-repeat="sex in vm.sexes">Beobachtungen</md-option>
        <md-option value="age" ng-repeat="sex in vm.sexes">Alter</md-option>
        <md-option value="last_observation" ng-repeat="sex in vm.sexes">Zuletzt beobachtet</md-option>
        <md-option value="last_modification" ng-repeat="sex in vm.sexes">Zuletzt bearbeitet</md-option>
      </md-select> -->
    </section>

    <section>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Alter</th>
            <th>Geschlecht</th>
            <th>Beobachtungen</th>
<!--             <th>Personale Kompetenzen</th>
            <th>Schriftliche und sprachliche Kompetenzen</th>
            <th>Soziale Kompetenzen</th>
            <th>Mathematische Kompetenzen</th>
 -->            <!-- <th>Gruppe</th> -->
            <th>
              <!-- tools -->
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="kid in vm.me.group.kids">
            <td>{{kid.name}}</td>
            <td>{{kid.age}}</td>
            <td>{{kid.sexString}}</td>
            <td>{{kid.observations.length}}</td>
<!--             <td>{{kid.groupedObs[1].length}}</td>
            <td>{{kid.groupedObs[2].length}}</td>
            <td>{{kid.groupedObs[3].length}}</td>
            <td>{{kid.groupedObs[4].length}}</td> -->
            <td>Beobachten</td>
          </tr>
        </tbody>
      </table>

    </section>

  </md-content>
</div>

