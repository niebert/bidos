<div layout="column" layout-fill>
	<md-toolbar>
		<div class="md-toolbar-tools">
			<md-button aria-label="home" ui-sref="bx.home">
				<md-icon md-svg-src="/img/ic_dashboard_48px.svg" class="s48" alt="BiDoS"></md-icon>
			</md-button>
			<h2> Eigenes Profil </h2>
			<span flex></span>
			<!-- <md-button aria-label="kid-dialog" ng-click="vm.dialog($event, {type:'kid'})">
				{{ vm.networkStatus }}
			</md-button> -->
			<md-button aria-label="settings" ui-sref="bx.settings">
				<md-icon md-svg-src="/img/ic_settings_48px.svg" class="s48" alt="BiDoS"></md-icon>
			</md-button>
		</div>
	</md-toolbar>

	<md-content flex class="bx-content">

		<h2>Eigener Benutzer</h2>
		<pre>{{ vm.me | json }}</pre>

		<div ng-hide="$root.auth.role==1">
			<h2>Daten exportieren</h2>
			<pre><a download="bidos-data-all-{{ vm.date }}.json" href="{{ vm.resourceBlob.url }}">{{ vm.resourceBlob.blob | json }}</a></pre>
		</div>

		<h2>Ungesendete Daten <small ng-click="vm.sync()" class="bx-sync">synchronisieren</small></h2>
		<ol>
			<li ng-repeat="item in vm.outbox">
				<strong>{{ item.operation }}</strong> <small>{{ item.date | date }}</small>
				<pre>{{ item.resource | json }}</pre>
			</li>
		</ol>

		<h2>Ungeprüfte Beobachtungen</h2>
		<ol>
			<li ng-repeat="obs in vm.observations" ng-click="vm.dialog($event, obs)">
				<strong>{{ obs.kid.name }}</strong> {{ obs.niveau }} <small>(von {{ obs.author.name }} am {{ obs.created_at | date }})</small><br>
				<small>{{ obs.item.name }}</small>
			</li>
		</ol>

		<h2>Eigene Notizen <small ng-click="vm.addNote()" class="bx-sync">neu</small></h2>
		<ol>
			<li ng-repeat="note in vm.notes" ng-click="vm.dialog($event, note)">
				<strong>{{ note.created_at | date }}</strong> {{ note.text }} <br>
				<span ng-click="vm.deleteNote(note)">löschen</span>
			</li>
		</ol>

	</md-content>
</div>

